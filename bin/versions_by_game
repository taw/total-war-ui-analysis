#!/usr/bin/env ruby

require "pathname"

data_dir = Pathname("#{__dir__}") + "../data"

counts = {}

data_dir.find do |path|
  next if path.directory?
  magic = path.read(10)
  next unless magic =~ /\AVersion(\d\d\d)\z/
  version = $1.to_i
  game = path.dirname.basename.to_s
  counts[game] ||= Hash.new(0)
  counts[game][version] += 1
end

counts.each do |game, versions|
  summary = versions.sort.map{|k,v| "#{k}:#{v}"}.join(", ")
  puts "#{game}: #{summary}"
end
